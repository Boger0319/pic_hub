import{l as te,m as oe,n as L,d as A,p as se,r as x,q as w,T as j,v as Q,x as ne,o as _,y as P,w as b,z as U,g as m,A as C,e as n,B as Z,C as q,D as ae,G as M,t as D,H as ie,c as N,F as X,I as G,J as H,f as g,K as le,L as re,M as ce,N as ue,O as de,P as O,Q as J,R as pe,S as W,U as fe,a as me,s as ve,V as _e,b as ye,W as ge,X as he,E as Ce,h as V,Y as be,Z as Se,i as Te,j as Ee}from"./index-f34a2933.js";import{b as z,a as K,E as ke}from"./axios-9af3d20b.js";const Y=["success","info","warning","error"],we=te({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:oe},id:{type:String,default:""},message:{type:L([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:L(Function),default:()=>{}},onClose:{type:L(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Y,""],default:""},zIndex:{type:Number,default:0}}),Ne={destroy:()=>!0},Ie=["id"],Pe=["textContent"],xe={key:0},$e=["innerHTML"],Be=A({name:"ElNotification"}),Le=A({...Be,props:we,emits:Ne,setup(e,{expose:a}){const o=e,{ns:s,zIndex:l}=se("notification"),{nextZIndex:p,currentZIndex:c}=l,{Close:u}=ce,r=x(!1);let i;const f=w(()=>{const t=o.type;return t&&j[o.type]?s.m(t):""}),v=w(()=>o.type&&j[o.type]||o.icon),T=w(()=>o.position.endsWith("right")?"right":"left"),d=w(()=>o.position.startsWith("top")?"top":"bottom"),y=w(()=>({[d.value]:`${o.offset}px`,zIndex:c.value}));function E(){o.duration>0&&({stop:i}=ue(()=>{r.value&&h()},o.duration))}function k(){i==null||i()}function h(){r.value=!1}function B({code:t}){t===z.delete||t===z.backspace?k():t===z.esc?r.value&&h():E()}return Q(()=>{E(),p(),r.value=!0}),ne(document,"keydown",B),a({visible:r,close:h}),(t,I)=>(_(),P(le,{name:n(s).b("fade"),onBeforeLeave:t.onClose,onAfterLeave:I[1]||(I[1]=R=>t.$emit("destroy")),persisted:""},{default:b(()=>[U(m("div",{id:t.id,class:C([n(s).b(),t.customClass,n(T)]),style:Z(n(y)),role:"alert",onMouseenter:k,onMouseleave:E,onClick:I[0]||(I[0]=(...R)=>t.onClick&&t.onClick(...R))},[n(v)?(_(),P(n(q),{key:0,class:C([n(s).e("icon"),n(f)])},{default:b(()=>[(_(),P(ae(n(v))))]),_:1},8,["class"])):M("v-if",!0),m("div",{class:C(n(s).e("group"))},[m("h2",{class:C(n(s).e("title")),textContent:D(t.title)},null,10,Pe),U(m("div",{class:C(n(s).e("content")),style:Z(t.title?void 0:{margin:0})},[ie(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(_(),N(X,{key:1},[M(" Caution here, message could've been compromised, never use user's input as message "),m("p",{innerHTML:t.message},null,8,$e)],2112)):(_(),N("p",xe,D(t.message),1))])],6),[[G,t.message]]),t.showClose?(_(),P(n(q),{key:0,class:C(n(s).e("closeBtn")),onClick:H(h,["stop"])},{default:b(()=>[g(n(u))]),_:1},8,["class","onClick"])):M("v-if",!0)],2)],46,Ie),[[G,r.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Me=re(Le,[["__file","/home/runner/work/element-plus/element-plus/packages/components/notification/src/notification.vue"]]);const $={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},F=16;let Ve=1;const S=function(e={},a=null){if(!de)return{close:()=>{}};(typeof e=="string"||O(e))&&(e={message:e});const o=e.position||"top-right";let s=e.offset||0;$[o].forEach(({vm:f})=>{var v;s+=(((v=f.el)==null?void 0:v.offsetHeight)||0)+F}),s+=F;const l=`notification_${Ve++}`,p=e.onClose,c={...e,offset:s,id:l,onClose:()=>{ze(l,o,p)}};let u=document.body;J(e.appendTo)?u=e.appendTo:pe(e.appendTo)&&(u=document.querySelector(e.appendTo)),J(u)||(u=document.body);const r=document.createElement("div"),i=g(Me,c,O(c.message)?{default:()=>c.message}:null);return i.appContext=a??S._context,i.props.onDestroy=()=>{W(null,r)},W(i,r),$[o].push({vm:i}),u.appendChild(r.firstElementChild),{close:()=>{i.component.exposed.visible.value=!1}}};Y.forEach(e=>{S[e]=(a={})=>((typeof a=="string"||O(a))&&(a={message:a}),S({...a,type:e}))});function ze(e,a,o){const s=$[a],l=s.findIndex(({vm:i})=>{var f;return((f=i.component)==null?void 0:f.props.id)===e});if(l===-1)return;const{vm:p}=s[l];if(!p)return;o==null||o(p);const c=p.el.offsetHeight,u=a.split("-")[0];s.splice(l,1);const r=s.length;if(!(r<1))for(let i=l;i<r;i++){const{el:f,component:v}=s[i].vm,T=Number.parseInt(f.style[u],10)-c-F;v.props.offset=T}}function De(){for(const e of Object.values($))e.forEach(({vm:a})=>{a.component.exposed.visible.value=!1})}S.closeAll=De;S._context=null;const He=fe(S,"$notify");const ee=e=>(be("data-v-e0ff8a62"),e=e(),Se(),e),Oe={class:"addContent"},Fe=ee(()=>m("div",{class:"tips"},"提交链接：",-1)),Ae={class:"urlInput"},Re=ee(()=>m("br",null,null,-1)),je={class:"preview"},Ue={class:"prePics"},Ze=A({__name:"add_pic_page",setup(e){const a=me(),{mainDomain:o}=ve(a),s=Te(),l=x();let p=x(),c=x();const u=o.value+"/page/add",r=o.value+"/pic/",i=o.value+"/getPreview";Q(()=>{});const f=()=>{He({title:"添加成功",type:"success"})},v=()=>{K.get(i,{params:{url:l.value}}).then(d=>{let y=JSON.parse(JSON.stringify(d.data));p=y[0],c=y[1],console.log(c)}).catch(d=>{console.error(d)})},T=()=>{K.get(u,{params:{url:l.value}}).then(d=>{f(),s.push("/page/"+d.data),console.log(d.data)}).catch(d=>{console.error(d)})};return(d,y)=>{const E=ge,k=he,h=Ce,B=ke;return _(),N("div",Oe,[Fe,m("div",Ae,[g(E,{type:"textarea",modelValue:n(l),"onUpdate:modelValue":y[0]||(y[0]=t=>_e(l)?l.value=t:null)},null,8,["modelValue"])]),g(k,{type:"success",onClick:H(v,["prevent"])},{default:b(()=>[V("预览")]),_:1},8,["onClick"]),g(k,{type:"primary",onClick:H(T,["prevent"])},{default:b(()=>[V("提交")]),_:1},8,["onClick"]),Re,m("div",je,[m("div",null,[g(h,{class:"preTitle"},{default:b(()=>[V(D(n(p)),1)]),_:1})]),(_(!0),N(X,null,ye(n(c),t=>(_(),N("div",Ue,[g(B,{src:r+t,alt:"",class:"pic",lazy:""},null,8,["src"])]))),256))])])}}});const Je=Ee(Ze,[["__scopeId","data-v-e0ff8a62"]]);export{Je as default};
